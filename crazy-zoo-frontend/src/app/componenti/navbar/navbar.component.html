<div class="my-shadow">
  <nav class="navbar navbar-expand-lg">
  <div class="container-fluid d-flex justify-content-between align-items-center py-1">
    <a class="navbar-brand p-0 ps-3" href="#"><img src="/logo web.png" alt=""></a>
    <div>
      <form class="d-flex w-100" (ngSubmit)="applySearch()">
        <div class="input-group d-flex align-items-center">
          <input type="search" class="form-control search rounded-4 me-4 my-shadow" placeholder="Cerca prodotti..."
            aria-label="Search" [(ngModel)]="searchTerm" name="searchTerm">
          <button class="btn rounded-4 bg-color d-flex justify-content-center align-items-center" type="submit">
            <mat-icon>search</mat-icon>
          </button>
        </div>
      </form>
    </div>
    <div>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav pe-4 d-flex gap-2 justify-content-center align-items-center">
          <li class=" d-flex align-items-center" *ngIf="isLogged">
            <!-- Bottone per aprire il carrello come Offcanvas -->
            <button class="me-3 border-0 bg-white d-flex align-items-center" type="button" data-bs-toggle="offcanvas"
              data-bs-target="#cartOffcanvas" aria-controls="cartOffcanvas">
              <mat-icon [matBadge]="numeroProdotti" class="fs-3">shopping_cart</mat-icon>
            </button>
          </li>
          <li class=" d-flex align-items-center" *ngIf="isLogged">
            <button [routerLink]="'/utente'" class="me-3 border-0 bg-white d-flex align-items-center">
              <mat-icon class="fs-3">person</mat-icon>
            </button>
          </li>
          <li class=" d-flex align-items-center" *ngIf="isLogged">
            <button class="btn btn-outline-danger border-3 d-flex align-items-center justify-content-center" (click)="logout()">
              <mat-icon class="fs-4 logout">logout</mat-icon>
            </button>
          </li>
          <li class=" d-flex align-items-center" *ngIf="!isLogged">
            <button [routerLink]="'/login'" class="btn btn-outline-success border-3 justify-content-start d-flex align-items-center">
              <mat-icon class="fs-4 login">login</mat-icon>
            </button>
          </li>
        </ul>
      </div>
    </div>

  </div>
</nav>
<div *ngIf="!isVisible()" class=" w-100 px-5 border-top border-2 border-light-subtle mb-3">
  <div class="container d-flex justify-content-evenly">
    <a [routerLink]="['/prodotti']" [queryParams]="{nomeTipologia: 'Giocattoli'}" class="category-link d-flex align-items-center justify-content-center gap-2">
      <mat-icon>toys</mat-icon>
      Giocattoli
    </a>
    <a [routerLink]="['/prodotti']" [queryParams]="{nomeTipologia: 'Secco'}" class="category-link d-flex align-items-center justify-content-center gap-2">
      <mat-icon>lunch_dining</mat-icon>
      Cibo Secco
    </a>
    <a [routerLink]="['/prodotti']" [queryParams]="{nomeTipologia: 'Umido'}" class="category-link d-flex align-items-center justify-content-center gap-2">
      <mat-icon>soup_kitchen</mat-icon>
      Cibo Umido
    </a>
    <a [routerLink]="['/prodotti']" [queryParams]="{nomeAnimale: 'cane'}" class="category-link d-flex align-items-center justify-content-center gap-2"
      [class.active]="nomeAnimale === 'cane'">
      <i class="fa-solid fa-dog"></i>
      Cane
    </a>
    <a [routerLink]="['/prodotti']" [queryParams]="{nomeAnimale: 'gatto'}" class="category-link d-flex align-items-center justify-content-center gap-2"
      [class.active]="nomeAnimale === 'gatto'">
      <i class="fa-solid fa-cat"></i>
      Gatto
    </a>
    <a [routerLink]="['/prodotti']" [queryParams]="{nomeAnimale: 'pesce'}" class="category-link d-flex align-items-center justify-content-center gap-2"
      [class.active]="nomeAnimale === 'pesce'">
      <i class="fa-solid fa-fish"></i>
      Pesce
    </a>
    <a [routerLink]="['/prodotti']" [queryParams]="{nomeAnimale: 'uccello'}" class="category-link d-flex align-items-center justify-content-center gap-2"
      [class.active]="nomeAnimale === 'uccello'">
      <i class="fa-solid fa-dove"></i>
      Uccello
    </a>
    <a [routerLink]="['/prodotti']" [queryParams]="{nomeAnimale: 'Roditore'}" class="category-link d-flex align-items-center justify-content-center gap-2"
      [class.active]="nomeAnimale === 'Roditore'">
      <mat-icon>pest_control_rodent</mat-icon>
      Roditore
    </a>
  </div>



</div>
</div>


<!-- Offcanvas Bootstrap per il carrello -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="cartOffcanvas" aria-labelledby="cartOffcanvasLabel">
  <div class="offcanvas-header py-0 pt-2 justify-content-end">
    <button type="button" class="border-0 bg-white d-flex justify-content-center align-items-center" data-bs-dismiss="offcanvas" aria-label="Close"><mat-icon class="x">close</mat-icon></button>
  </div>
  <div class="offcanvas-body">
    <!-- Qui carichiamo il CarrelloComponent -->
    <app-carrello (numeroProdotti)="numeroProdottiAggiunti($event)"></app-carrello>
  </div>
</div>